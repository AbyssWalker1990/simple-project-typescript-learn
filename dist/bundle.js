(()=>{"use strict";class e{constructor(e,t,n,r){const i=document.getElementById(e),s=document.getElementById(t);if(null==i)throw new Error("There is no element with this identifier");if(this.templateElement=i,null==s)throw new Error("There is no element with this identifier");this.hostElement=s;const l=document.importNode(this.templateElement.content,!0);this.element=l.firstElementChild,null!=r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return null!==e.required&&(t=t&&0!==e.value.toString().trim().length),null!==e.minLength&&void 0!==e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!==e.maxLength&&void 0!==e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof+e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof+e.value&&(t=t&&e.value<=e.max),t}var n;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(n||(n={}));class r{constructor(e,t,n,r,i){this.id=e,this.title=t,this.description=n,this.people=r,this.status=i}}class i{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class s extends i{constructor(){super(),this.projects=[]}static getInstance(){return null!=this.instance||(this.instance=new s),this.instance}addProject(e,t,i){const s=new r(Math.random().toString(),e,t,i,n.Active);this.projects.push(s),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));null!=n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const l=s.getInstance();function o(e,t,n){const r=n.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}}class a extends e{constructor(){super("project-input","app",!0,"user-input");const e=this.element.querySelector("#title"),t=this.element.querySelector("#description"),n=this.element.querySelector("#people");if(null===e)throw new Error("There is no element with this identifier");if(this.titleInputElement=e,null===t)throw new Error("There is no element with this identifier");if(this.descriptionInputElement=t,null===n)throw new Error("There is no element with this identifier");this.peopleInputElement=n,this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=this.peopleInputElement.value,i={value:n,required:!0,minLength:5},s={value:r,required:!0,min:1,max:5};if(t({value:e,required:!0})&&t(i)&&t(s))return[e,n,+r];throw alert("Invalid input, please try again"),new Error("Invalid input")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;null!==l&&l.addProject(e,n,r),this.clearInputs()}}}!function(e,t,n,r){var i,s=arguments.length,l=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(l=(s<3?i(l):s>3?i(t,n,l):i(t,n))||l);s>3&&l&&Object.defineProperty(t,n,l)}([o],a.prototype,"submitHandler",null);class c extends e{get persons(){const e=this.project.people.toString();return 1===this.project.people?"1 person":`${e} persons`}constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}dragStartHandler(e){const t=e.dataTransfer;null!==t&&(t.setData("text/plain",this.project.id),t.effectAllowed="move")}dragEndHandler(e){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){const e=this.element.querySelector("h2"),t=this.element.querySelector("h3"),n=this.element.querySelector("p");null!==e&&(e.textContent=this.project.title),null!==t&&(t.textContent=this.project.description.toString()),null!==n&&(n.textContent=this.persons+" assigned.")}}!function(e,t,n,r){var i,s=arguments.length,l=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(l=(s<3?i(l):s>3?i(t,n,l):i(t,n))||l);s>3&&l&&Object.defineProperty(t,n,l)}([o],c.prototype,"dragStartHandler",null);var h=function(e,t,n,r){var i,s=arguments.length,l=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(l=(s<3?i(l):s>3?i(t,n,l):i(t,n))||l);return s>3&&l&&Object.defineProperty(t,n,l),l};class u extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){null!=e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer?.getData("text/plain");l.moveProject(t,"active"===this.type?n.Active:n.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),l.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===n.Active:e.status===n.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`,t=this.element.querySelector("ul");if(null==t)throw new Error("There is no element with this identifier");t.id=e;const n=this.element.querySelector("h2");if(null==n)throw new Error("There is no element with this identifier");n.textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";const e=this.element.querySelector("ul");for(const t of this.assignedProjects)null!==e&&new c(e.id,t)}}h([o],u.prototype,"dragOverHandler",null),h([o],u.prototype,"dropHandler",null),h([o],u.prototype,"dragLeaveHandler",null),new a,new u("active"),new u("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RXRDcEgsS0FBSzRHLGlCQUFtQlcsRUFDeEJ2SCxLQUFLeUgsZ0JBQWdCLEdBRXpCLENBRUE5QyxnQkFDRSxNQUFNK0MsRUFBUyxHQUFHMUgsS0FBSzJHLHFCQUNqQmdCLEVBQVczSCxLQUFLSSxRQUFROEQsY0FBYyxNQUM1QyxHQUFnQixNQUFaeUQsRUFHRixNQUFNLElBQUk1SCxNQUFNLDRDQUZoQjRILEVBQVNySCxHQUFLb0gsRUFJaEIsTUFBTUUsRUFBYTVILEtBQUtJLFFBQVE4RCxjQUFjLE1BQzlDLEdBQWtCLE1BQWQwRCxFQUdGLE1BQU0sSUFBSTdILE1BQU0sNENBRmhCNkgsRUFBV25CLFlBQWN6RyxLQUFLMkcsS0FBS2tCLGNBQWdCLFdBSXZELENBRVFKLGlCQUNTN0gsU0FBU0MsZUFBZSxHQUFHRyxLQUFLMkcsc0JBQ3hDbUIsVUFBWSxHQUNuQixNQUFNQyxFQUFPL0gsS0FBS0ksUUFBUThELGNBQWMsTUFDeEMsSUFBSyxNQUFNOEQsS0FBV2hJLEtBQUs0RyxpQkFDWixPQUFUbUIsR0FDVyxJQUFJckMsRUFBWXFDLEVBQUt6SCxHQUFJMEgsRUFHNUMsRUFoRUEsR0FEQ3pFLEcsb0NBVUQsR0FEQ0EsRyxnQ0FVRCxHQURDQSxHLHFDQ2xDSCxJQUFJUyxFQUNKLElBQUkwQyxFQUFZLFVBQ2hCLElBQUlBLEVBQVksVyIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbXBsZS1wcm9qZWN0LXR5cGVzY3JpcHQtbGVhcm4vLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9zaW1wbGUtcHJvamVjdC10eXBlc2NyaXB0LWxlYXJuLy4vc3JjL3V0aWxzL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vc2ltcGxlLXByb2plY3QtdHlwZXNjcmlwdC1sZWFybi8uL3NyYy9tb2RlbHMvcHJvamVjdC1tb2RlbC50cyIsIndlYnBhY2s6Ly9zaW1wbGUtcHJvamVjdC10eXBlc2NyaXB0LWxlYXJuLy4vc3JjL3N0YXRlL3Byb2plY3Qtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vc2ltcGxlLXByb2plY3QtdHlwZXNjcmlwdC1sZWFybi8uL3NyYy9kZWNvcmF0b3JzL2F1dG9iaW5kLWRlY29yYXRvci50cyIsIndlYnBhY2s6Ly9zaW1wbGUtcHJvamVjdC10eXBlc2NyaXB0LWxlYXJuLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dC50cyIsIndlYnBhY2s6Ly9zaW1wbGUtcHJvamVjdC10eXBlc2NyaXB0LWxlYXJuLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pdGVtLnRzIiwid2VicGFjazovL3NpbXBsZS1wcm9qZWN0LXR5cGVzY3JpcHQtbGVhcm4vLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWxpc3QudHMiLCJ3ZWJwYWNrOi8vc2ltcGxlLXByb2plY3QtdHlwZXNjcmlwdC1sZWFybi8uL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29tcG9uZW50IEJhc2UgY2xhc3NcclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQsIFUgZXh0ZW5kcyBIVE1MRWxlbWVudD4ge1xyXG4gIHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudFxyXG4gIGhvc3RFbGVtZW50OiBUXHJcbiAgZWxlbWVudDogVVxyXG5cclxuICBjb25zdHJ1Y3RvciAoXHJcbiAgICB0ZW1wbGF0ZUlkOiBzdHJpbmcsXHJcbiAgICBob3N0RWxlbWVudElkOiBzdHJpbmcsXHJcbiAgICBpbnNlcnRBdFN0YXJ0OiBib29sZWFuLFxyXG4gICAgbmV3RWxlbWVudElkPzogc3RyaW5nXHJcbiAgKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVJZClcclxuICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZClcclxuICAgIGlmICh0ZW1wbGF0ZUVsICE9IG51bGwpIHtcclxuICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSB0ZW1wbGF0ZUVsIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnRcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gZWxlbWVudCB3aXRoIHRoaXMgaWRlbnRpZmllcicpXHJcbiAgICB9XHJcbiAgICBpZiAoaG9zdEVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQgYXMgVFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyBlbGVtZW50IHdpdGggdGhpcyBpZGVudGlmaWVyJylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbXBvcnROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LCB0cnVlKVxyXG4gICAgdGhpcy5lbGVtZW50ID0gaW1wb3J0Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVXHJcbiAgICBpZiAobmV3RWxlbWVudElkICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LmlkID0gbmV3RWxlbWVudElkXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXR0YWNoIChpbnNlcnRBdEJlZ2lubmluZzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgdGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXHJcbiAgICAgIGluc2VydEF0QmVnaW5uaW5nID8gJ2FmdGVyYmVnaW4nIDogJ2JlZm9yZWVuZCcsIHRoaXMuZWxlbWVudFxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgYWJzdHJhY3QgY29uZmlndXJlICgpOiB2b2lkXHJcbiAgYWJzdHJhY3QgcmVuZGVyQ29udGVudCAoKTogdm9pZFxyXG59XHJcbiIsIi8vIFZhbGlkYXRpb25cclxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0YWJsZSB7XHJcbiAgdmFsdWU6IHN0cmluZyB8IG51bWJlclxyXG4gIHJlcXVpcmVkPzogYm9vbGVhblxyXG4gIG1pbkxlbmd0aD86IG51bWJlclxyXG4gIG1heExlbmd0aD86IG51bWJlclxyXG4gIG1pbj86IG51bWJlclxyXG4gIG1heD86IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUgKHZhbGlkYXRhYmxlSW5wdXQ6IFZhbGlkYXRhYmxlKTogYm9vbGVhbiB7XHJcbiAgbGV0IGlzVmFsaWQgPSB0cnVlXHJcbiAgaWYgKHZhbGlkYXRhYmxlSW5wdXQucmVxdWlyZWQgIT09IG51bGwpIHtcclxuICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwXHJcbiAgfVxyXG4gIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPT0gbnVsbCAmJlxyXG4gICAgICB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS5sZW5ndGggPj0gdmFsaWRhdGFibGVJbnB1dC5taW5MZW5ndGhcclxuICB9XHJcbiAgaWYgKHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9PSBudWxsICYmXHJcbiAgICAgIHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLmxlbmd0aCA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aFxyXG4gIH1cclxuICBpZiAodmFsaWRhdGFibGVJbnB1dC5taW4gIT0gbnVsbCAmJiB0eXBlb2YgK3ZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInKSB7XHJcbiAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluXHJcbiAgfVxyXG4gIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1heCAhPSBudWxsICYmIHR5cGVvZiArdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPD0gdmFsaWRhdGFibGVJbnB1dC5tYXhcclxuICB9XHJcblxyXG4gIHJldHVybiBpc1ZhbGlkXHJcbn1cclxuIiwiLy8gUHJvamVjdCB0eXBlXHJcbmV4cG9ydCBlbnVtIFByb2plY3RTdGF0dXMge1xyXG4gIEFjdGl2ZSxcclxuICBGaW5pc2hlZFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdCB7XHJcbiAgY29uc3RydWN0b3IgKFxyXG4gICAgcHVibGljIGlkOiBzdHJpbmcsXHJcbiAgICBwdWJsaWMgdGl0bGU6IHN0cmluZyxcclxuICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgcHVibGljIHBlb3BsZTogbnVtYmVyLFxyXG4gICAgcHVibGljIHN0YXR1czogUHJvamVjdFN0YXR1c1xyXG4gICkge31cclxufVxyXG4iLCJpbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QtbW9kZWwnXHJcblxyXG50eXBlIExpc3RlbmVyPFQ+ID0gKGl0ZW1zOiBUW10pID0+IHZvaWRcclxuXHJcbmNsYXNzIFN0YXRlPFQ+IHtcclxuICBwcm90ZWN0ZWQgbGlzdGVuZXJzOiBBcnJheTxMaXN0ZW5lcjxUPj4gPSBbXVxyXG5cclxuICBhZGRMaXN0ZW5lciAobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pOiB2b2lkIHtcclxuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbilcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0U3RhdGUgZXh0ZW5kcyBTdGF0ZTxQcm9qZWN0PiB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBwcm9qZWN0czogUHJvamVjdFtdID0gW11cclxuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUHJvamVjdFN0YXRlXHJcblxyXG4gIHByaXZhdGUgY29uc3RydWN0b3IgKCkge1xyXG4gICAgc3VwZXIoKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlICgpOiBhbnkge1xyXG4gICAgaWYgKHRoaXMuaW5zdGFuY2UgIT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZVxyXG4gICAgfVxyXG4gICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBQcm9qZWN0U3RhdGUoKVxyXG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VcclxuICB9XHJcblxyXG4gIGFkZFByb2plY3QgKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIG51bU9mUGVvcGxlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcclxuICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygpLFxyXG4gICAgICB0aXRsZSxcclxuICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgIG51bU9mUGVvcGxlLFxyXG4gICAgICBQcm9qZWN0U3RhdHVzLkFjdGl2ZVxyXG4gICAgKVxyXG4gICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpXHJcbiAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpXHJcbiAgfVxyXG5cclxuICBtb3ZlUHJvamVjdCAocHJvamVjdElkOiBzdHJpbmcsIG5ld1N0YXR1czogUHJvamVjdFN0YXR1cyk6IHZvaWQge1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZChwcmogPT4gcHJqLmlkID09PSBwcm9qZWN0SWQpXHJcbiAgICBpZiAocHJvamVjdCAhPSBudWxsICYmIHByb2plY3Quc3RhdHVzICE9PSBuZXdTdGF0dXMpIHtcclxuICAgICAgcHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXNcclxuICAgICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVMaXN0ZW5lcnMgKCk6IHZvaWQge1xyXG4gICAgZm9yIChjb25zdCBsaXN0ZW5lckZuIG9mIHRoaXMubGlzdGVuZXJzKSB7XHJcbiAgICAgIGxpc3RlbmVyRm4odGhpcy5wcm9qZWN0cy5zbGljZSgpKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXRpbmcgZ2xvYmFsIGNvbnN0YW50IGZvciBzdGF0ZVxyXG5leHBvcnQgY29uc3QgcHJvamVjdFN0YXRlID0gUHJvamVjdFN0YXRlLmdldEluc3RhbmNlKClcclxuIiwiLy8gQXV0b2JpbmQgZGVjb3JhdG9yXHJcbmV4cG9ydCBmdW5jdGlvbiBBdXRvYmluZCAoXzogYW55LCBfMjogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpOiBQcm9wZXJ0eURlc2NyaXB0b3Ige1xyXG4gIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZVxyXG4gIGNvbnN0IGFkakRlc2NyaXB0b3I6IFByb3BlcnR5RGVzY3JpcHRvciA9IHtcclxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgZ2V0ICgpIHtcclxuICAgICAgY29uc3QgYm91bmRGbiA9IG9yaWdpbmFsTWV0aG9kLmJpbmQodGhpcylcclxuICAgICAgcmV0dXJuIGJvdW5kRm5cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGFkakRlc2NyaXB0b3JcclxufVxyXG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2Jhc2UtY29tcG9uZW50J1xyXG5pbXBvcnQgeyB0eXBlIFZhbGlkYXRhYmxlLCB2YWxpZGF0ZSB9IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRpb24nXHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3Qtc3RhdGUnXHJcbmltcG9ydCB7IEF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZC1kZWNvcmF0b3InXHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+IHtcclxuICB0aXRsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudFxyXG4gIGRlc2NyaXB0aW9uSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50XHJcbiAgcGVvcGxlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50XHJcblxyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIHN1cGVyKCdwcm9qZWN0LWlucHV0JywgJ2FwcCcsIHRydWUsICd1c2VyLWlucHV0JylcclxuICAgIGNvbnN0IHRpdGxlSW5wdXRFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjdGl0bGUnKVxyXG4gICAgY29uc3QgZGVzY3JpcHRpb25JbnB1dEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZXNjcmlwdGlvbicpXHJcbiAgICBjb25zdCBwZW9wbGVJbnB1dEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwZW9wbGUnKVxyXG4gICAgaWYgKHRpdGxlSW5wdXRFbCAhPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50ID0gdGl0bGVJbnB1dEVsIGFzIEhUTUxJbnB1dEVsZW1lbnRcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gZWxlbWVudCB3aXRoIHRoaXMgaWRlbnRpZmllcicpXHJcbiAgICB9XHJcbiAgICBpZiAoZGVzY3JpcHRpb25JbnB1dEVsICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSBkZXNjcmlwdGlvbklucHV0RWwgYXMgSFRNTElucHV0RWxlbWVudFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyBlbGVtZW50IHdpdGggdGhpcyBpZGVudGlmaWVyJylcclxuICAgIH1cclxuICAgIGlmIChwZW9wbGVJbnB1dEVsICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMucGVvcGxlSW5wdXRFbGVtZW50ID0gcGVvcGxlSW5wdXRFbCBhcyBIVE1MSW5wdXRFbGVtZW50XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vIGVsZW1lbnQgd2l0aCB0aGlzIGlkZW50aWZpZXInKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY29uZmlndXJlKClcclxuICB9XHJcblxyXG4gIGNvbmZpZ3VyZSAoKTogdm9pZCB7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCAoKTogdm9pZCB7fVxyXG5cclxuICBwcml2YXRlIGdhdGhlclVzZXJJbnB1dCAoKTogW3N0cmluZywgc3RyaW5nLCBudW1iZXJdIHtcclxuICAgIGNvbnN0IGVudGVyZWRUaXRsZSA9IHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWVcclxuICAgIGNvbnN0IGVudGVyZWREZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWVcclxuICAgIGNvbnN0IGVudGVyZWRQZW9wbGUgPSB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZVxyXG5cclxuICAgIGNvbnN0IHRpdGxlVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogZW50ZXJlZFRpdGxlLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogZW50ZXJlZERlc2NyaXB0aW9uLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgbWluTGVuZ3RoOiA1XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGVvcGxlVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICB2YWx1ZTogZW50ZXJlZFBlb3BsZSxcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgIG1pbjogMSxcclxuICAgICAgbWF4OiA1XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF2YWxpZGF0ZSh0aXRsZVZhbGlkYXRhYmxlKSB8fFxyXG4gICAgICAgICF2YWxpZGF0ZShkZXNjcmlwdGlvblZhbGlkYXRhYmxlKSB8fFxyXG4gICAgICAgICF2YWxpZGF0ZShwZW9wbGVWYWxpZGF0YWJsZSkpIHtcclxuICAgICAgYWxlcnQoJ0ludmFsaWQgaW5wdXQsIHBsZWFzZSB0cnkgYWdhaW4nKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFtlbnRlcmVkVGl0bGUsIGVudGVyZWREZXNjcmlwdGlvbiwgK2VudGVyZWRQZW9wbGVdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNsZWFySW5wdXRzICgpOiB2b2lkIHtcclxuICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWUgPSAnJ1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudC52YWx1ZSA9ICcnXHJcbiAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnXHJcbiAgfVxyXG5cclxuICBAQXV0b2JpbmRcclxuICBwcml2YXRlIHN1Ym1pdEhhbmRsZXIgKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgY29uc3QgdXNlcklucHV0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKVxyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodXNlcklucHV0KSkge1xyXG4gICAgICBjb25zdCBbdGl0bGUsIGRlc2MsIHBlb3BsZV0gPSB1c2VySW5wdXRcclxuICAgICAgaWYgKHByb2plY3RTdGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgIHByb2plY3RTdGF0ZS5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjLCBwZW9wbGUpXHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jbGVhcklucHV0cygpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHR5cGUgRHJhZ2dhYmxlIH0gZnJvbSAnLi4vbW9kZWxzL2RyYWctZHJvcC1pbnRlcmZhY2VzJ1xyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL2Jhc2UtY29tcG9uZW50J1xyXG5pbXBvcnQgeyB0eXBlIFByb2plY3QgfSBmcm9tICcuLi9tb2RlbHMvcHJvamVjdC1tb2RlbCdcclxuaW1wb3J0IHsgQXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kLWRlY29yYXRvcidcclxuXHJcbi8vIFByb2plY3QgSXRlbSBDbGFzc1xyXG5leHBvcnQgY2xhc3MgUHJvamVjdEl0ZW0gZXh0ZW5kcyBDb21wb25lbnQ8SFRNTFVMaXN0RWxlbWVudCwgSFRNTExJRWxlbWVudD4gaW1wbGVtZW50cyBEcmFnZ2FibGUge1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgcHJvamVjdDogUHJvamVjdFxyXG5cclxuICBnZXQgcGVyc29ucyAoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHN0clBlb3BsZSA9IHRoaXMucHJvamVjdC5wZW9wbGUudG9TdHJpbmcoKVxyXG4gICAgaWYgKHRoaXMucHJvamVjdC5wZW9wbGUgPT09IDEpIHtcclxuICAgICAgcmV0dXJuICcxIHBlcnNvbidcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBgJHtzdHJQZW9wbGV9IHBlcnNvbnNgXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvciAoaG9zdElkOiBzdHJpbmcsIHByb2plY3Q6IFByb2plY3QpIHtcclxuICAgIHN1cGVyKCdzaW5nbGUtcHJvamVjdCcsIGhvc3RJZCwgZmFsc2UsIHByb2plY3QuaWQpXHJcbiAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0XHJcblxyXG4gICAgdGhpcy5jb25maWd1cmUoKVxyXG4gICAgdGhpcy5yZW5kZXJDb250ZW50KClcclxuICB9XHJcblxyXG4gIEBBdXRvYmluZFxyXG4gIGRyYWdTdGFydEhhbmRsZXIgKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGV2ZW50T2JqID0gZXZlbnQuZGF0YVRyYW5zZmVyXHJcbiAgICBpZiAoZXZlbnRPYmogIT09IG51bGwpIHtcclxuICAgICAgZXZlbnRPYmouc2V0RGF0YSgndGV4dC9wbGFpbicsIHRoaXMucHJvamVjdC5pZClcclxuICAgICAgZXZlbnRPYmouZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZHJhZ0VuZEhhbmRsZXIgKF86IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc29sZS5sb2coJ0RyYWdFbmQnKVxyXG4gIH1cclxuXHJcbiAgY29uZmlndXJlICgpOiB2b2lkIHtcclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydEhhbmRsZXIpXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuZHJhZ0VuZEhhbmRsZXIpXHJcbiAgfVxyXG5cclxuICByZW5kZXJDb250ZW50ICgpOiB2b2lkIHtcclxuICAgIGNvbnN0IGgyRWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKVxyXG4gICAgY29uc3QgaDNFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMycpXHJcbiAgICBjb25zdCBwRWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpXHJcbiAgICBpZiAoaDJFbCAhPT0gbnVsbCkge1xyXG4gICAgICBoMkVsLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlXHJcbiAgICB9XHJcbiAgICBpZiAoaDNFbCAhPT0gbnVsbCkge1xyXG4gICAgICBoM0VsLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LmRlc2NyaXB0aW9uLnRvU3RyaW5nKClcclxuICAgIH1cclxuICAgIGlmIChwRWwgIT09IG51bGwpIHtcclxuICAgICAgcEVsLnRleHRDb250ZW50ID0gdGhpcy5wZXJzb25zICsgJyBhc3NpZ25lZC4nXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnXHJcbmltcG9ydCB7IHR5cGUgUHJvamVjdCB9IGZyb20gJy4uL21vZGVscy9wcm9qZWN0LW1vZGVsJ1xyXG5pbXBvcnQgeyBBdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQtZGVjb3JhdG9yJ1xyXG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlJ1xyXG5pbXBvcnQgeyBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QtbW9kZWwnXHJcbmltcG9ydCB7IFByb2plY3RJdGVtIH0gZnJvbSAnLi9wcm9qZWN0LWl0ZW0nXHJcbmltcG9ydCB7IHR5cGUgRHJhZ1RhcmdldCB9IGZyb20gJy4uL21vZGVscy9kcmFnLWRyb3AtaW50ZXJmYWNlcydcclxuXHJcbi8vIFByb2plY3QgbGlzdCBjbGFzc1xyXG5leHBvcnQgY2xhc3MgUHJvamVjdExpc3QgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxFbGVtZW50PiBpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xyXG4gIGFzc2lnbmVkUHJvamVjdHM6IFByb2plY3RbXVxyXG5cclxuICBjb25zdHJ1Y3RvciAocHJpdmF0ZSByZWFkb25seSB0eXBlOiAnYWN0aXZlJyB8ICdmaW5pc2hlZCcpIHtcclxuICAgIHN1cGVyKCdwcm9qZWN0LWxpc3QnLCAnYXBwJywgZmFsc2UsIGAke3R5cGV9LXByb2plY3RzYClcclxuICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdXHJcbiAgICB0aGlzLmNvbmZpZ3VyZSgpXHJcbiAgICB0aGlzLnJlbmRlckNvbnRlbnQoKVxyXG4gIH1cclxuXHJcbiAgQEF1dG9iaW5kXHJcbiAgZHJhZ092ZXJIYW5kbGVyIChldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAoKGV2ZW50LmRhdGFUcmFuc2ZlciAhPSBudWxsKSAmJiBldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09ICd0ZXh0L3BsYWluJykge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgIGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIGFzIEhUTUxVTGlzdEVsZW1lbnRcclxuICAgICAgbGlzdEVsLmNsYXNzTGlzdC5hZGQoJ2Ryb3BwYWJsZScpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBAQXV0b2JpbmRcclxuICBkcm9wSGFuZGxlciAoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgcHJqSWQgPSBldmVudC5kYXRhVHJhbnNmZXI/LmdldERhdGEoJ3RleHQvcGxhaW4nKVxyXG4gICAgcHJvamVjdFN0YXRlLm1vdmVQcm9qZWN0KFxyXG4gICAgICBwcmpJZCxcclxuICAgICAgdGhpcy50eXBlID09PSAnYWN0aXZlJyA/IFByb2plY3RTdGF0dXMuQWN0aXZlIDogUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgQEF1dG9iaW5kXHJcbiAgZHJhZ0xlYXZlSGFuZGxlciAoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG4gICAgY29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykgYXMgSFRNTFVMaXN0RWxlbWVudFxyXG4gICAgbGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3BwYWJsZScpXHJcbiAgfVxyXG5cclxuICBjb25maWd1cmUgKCk6IHZvaWQge1xyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5kcmFnT3ZlckhhbmRsZXIpXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgdGhpcy5kcmFnTGVhdmVIYW5kbGVyKVxyXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyb3BIYW5kbGVyKVxyXG4gICAgcHJvamVjdFN0YXRlLmFkZExpc3RlbmVyKChwcm9qZWN0czogUHJvamVjdFtdKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlbGV2YW50UHJvamVjdHMgPSBwcm9qZWN0cy5maWx0ZXIocHJqID0+IHtcclxuICAgICAgICBpZiAodGhpcy50eXBlID09PSAnYWN0aXZlJykge1xyXG4gICAgICAgICAgcmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuQWN0aXZlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkZpbmlzaGVkXHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IHJlbGV2YW50UHJvamVjdHNcclxuICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ29udGVudCAoKTogdm9pZCB7XHJcbiAgICBjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgXHJcbiAgICBjb25zdCBsaXN0VWxFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpXHJcbiAgICBpZiAobGlzdFVsRWwgIT0gbnVsbCkge1xyXG4gICAgICBsaXN0VWxFbC5pZCA9IGxpc3RJZFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyBlbGVtZW50IHdpdGggdGhpcyBpZGVudGlmaWVyJylcclxuICAgIH1cclxuICAgIGNvbnN0IGxpc3RVbEgyRWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKVxyXG4gICAgaWYgKGxpc3RVbEgyRWwgIT0gbnVsbCkge1xyXG4gICAgICBsaXN0VWxIMkVsLnRleHRDb250ZW50ID0gdGhpcy50eXBlLnRvVXBwZXJDYXNlKCkgKyAnIFBST0pFQ1RTJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBubyBlbGVtZW50IHdpdGggdGhpcyBpZGVudGlmaWVyJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVuZGVyUHJvamVjdHMgKCk6IHZvaWQge1xyXG4gICAgY29uc3QgbGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YCkgYXMgSFRNTFVMaXN0RWxlbWVudFxyXG4gICAgbGlzdEVsLmlubmVySFRNTCA9ICcnXHJcbiAgICBjb25zdCB1bEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJylcclxuICAgIGZvciAoY29uc3QgcHJqSXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcclxuICAgICAgaWYgKHVsRWwgIT09IG51bGwpIHtcclxuICAgICAgICBjb25zdCBwcm9qID0gbmV3IFByb2plY3RJdGVtKHVsRWwuaWQsIHByakl0ZW0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvamVjdElucHV0IH0gZnJvbSAnLi9jb21wb25lbnRzL3Byb2plY3QtaW5wdXQnXHJcbmltcG9ydCB7IFByb2plY3RMaXN0IH0gZnJvbSAnLi9jb21wb25lbnRzL3Byb2plY3QtbGlzdCdcclxuXHJcbm5ldyBQcm9qZWN0SW5wdXQoKVxyXG5uZXcgUHJvamVjdExpc3QoJ2FjdGl2ZScpXHJcbm5ldyBQcm9qZWN0TGlzdCgnZmluaXNoZWQnKVxyXG4iXSwibmFtZXMiOlsiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZUlkIiwiaG9zdEVsZW1lbnRJZCIsImluc2VydEF0U3RhcnQiLCJuZXdFbGVtZW50SWQiLCJ0ZW1wbGF0ZUVsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiRXJyb3IiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEF0QmVnaW5uaW5nIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidmFsaWRhdGUiLCJ2YWxpZGF0YWJsZUlucHV0IiwiaXNWYWxpZCIsInJlcXVpcmVkIiwidmFsdWUiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJtaW5MZW5ndGgiLCJ1bmRlZmluZWQiLCJtYXhMZW5ndGgiLCJtaW4iLCJtYXgiLCJQcm9qZWN0U3RhdHVzIiwiUHJvamVjdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwZW9wbGUiLCJzdGF0dXMiLCJTdGF0ZSIsImxpc3RlbmVycyIsImFkZExpc3RlbmVyIiwibGlzdGVuZXJGbiIsInB1c2giLCJQcm9qZWN0U3RhdGUiLCJzdXBlciIsInByb2plY3RzIiwic3RhdGljIiwiaW5zdGFuY2UiLCJhZGRQcm9qZWN0IiwibnVtT2ZQZW9wbGUiLCJuZXdQcm9qZWN0IiwiTWF0aCIsInJhbmRvbSIsIkFjdGl2ZSIsInVwZGF0ZUxpc3RlbmVycyIsIm1vdmVQcm9qZWN0IiwicHJvamVjdElkIiwibmV3U3RhdHVzIiwicHJvamVjdCIsImZpbmQiLCJwcmoiLCJzbGljZSIsInByb2plY3RTdGF0ZSIsImdldEluc3RhbmNlIiwiQXV0b2JpbmQiLCJfIiwiXzIiLCJkZXNjcmlwdG9yIiwib3JpZ2luYWxNZXRob2QiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiYmluZCIsIlByb2plY3RJbnB1dCIsInRpdGxlSW5wdXRFbCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWwiLCJwZW9wbGVJbnB1dEVsIiwidGl0bGVJbnB1dEVsZW1lbnQiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyQ29udGVudCIsImdhdGhlclVzZXJJbnB1dCIsImVudGVyZWRUaXRsZSIsImVudGVyZWREZXNjcmlwdGlvbiIsImVudGVyZWRQZW9wbGUiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwicGVvcGxlVmFsaWRhdGFibGUiLCJhbGVydCIsImNsZWFySW5wdXRzIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImRlc2MiLCJQcm9qZWN0SXRlbSIsInBlcnNvbnMiLCJzdHJQZW9wbGUiLCJob3N0SWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwiZXZlbnRPYmoiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZWZmZWN0QWxsb3dlZCIsImRyYWdFbmRIYW5kbGVyIiwiY29uc29sZSIsImxvZyIsImgyRWwiLCJoM0VsIiwicEVsIiwidGV4dENvbnRlbnQiLCJQcm9qZWN0TGlzdCIsInR5cGUiLCJhc3NpZ25lZFByb2plY3RzIiwiZHJhZ092ZXJIYW5kbGVyIiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJkcm9wSGFuZGxlciIsInByaklkIiwiZ2V0RGF0YSIsIkZpbmlzaGVkIiwiZHJhZ0xlYXZlSGFuZGxlciIsInJlbW92ZSIsInJlbGV2YW50UHJvamVjdHMiLCJmaWx0ZXIiLCJyZW5kZXJQcm9qZWN0cyIsImxpc3RJZCIsImxpc3RVbEVsIiwibGlzdFVsSDJFbCIsInRvVXBwZXJDYXNlIiwiaW5uZXJIVE1MIiwidWxFbCIsInByakl0ZW0iXSwic291cmNlUm9vdCI6IiJ9